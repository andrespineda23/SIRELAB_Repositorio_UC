<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>        
    </h:head>
    <h:body  onload="nobackbutton();">
        <ui:composition template="/xhtml/template/templatepaginas.xhtml">
            <ui:define name="body">
                <h:form id="form">
                    <div class="container">
                        <br></br>
                        <br></br>
                        <br></br>
                        <div class="row">
                            <ol class="breadcrumb">
                                <li><a href="#">Inicio</a></li>
                                <li><a href="#">Administrar Salas</a></li>
                                <li class="active">Registrar Sala</li>
                            </ol>
                        </div>
                        <div class="row">
                            <div class="col-md-12 row">
                                <h2 class="info">
                                    Información Registro
                                </h2>
                                <p>
                                    Los campos marcados con (*) son obligatorios. Los caracteres especiales estan prohibidos para el registro de la información. 
                                </p>
                                <p>
                                    Este registro es unicamente para salas de laboratorio de la universidad, al momento de ser registrada en el sistema su estado sera ACTIVO, para su activación es necesario que un personal de laboratorio o administrador del sistema gestione el proceso. 
                                </p>
                            </div>
                            <div class="col-md-12 row">
                                <fieldset>
                                    <legend class="text-info">Datos Basicos</legend>
                                    <div class="form-group">
                                        <strong><h:outputText value="Codigo Sala*"/></strong>
                                        <h:inputText maxlength="20"  value="#{controllerRegistrarSala.nuevoCodigoSala}" disabled="#{controllerRegistrarSala.activarCasillas}" required="true" class="form-control" id="nuevoCodigoSala" requiredMessage="El campo Codigo es obligatorio-">
                                            <f:ajax event="blur" listener="#{controllerRegistrarSala.validarCodigoSala()}" execute="nuevoCodigoSala" render="nuevoCodigoSala msnCodigoSala" />
                                        </h:inputText>
                                        <h6><h:message id="msnCodigoSala" for="nuevoCodigoSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Nombre Sala*"/></strong>
                                        <h:inputText maxlength="45" value="#{controllerRegistrarSala.nuevoNombreSala}" disabled="#{controllerRegistrarSala.activarCasillas}" required="true" class="form-control" id="nuevoNombreSala"  requiredMessage="El campo Nombre es obligatorio.">
                                            <f:ajax event="blur" listener="#{controllerRegistrarSala.validarNombreSala()}" execute="nuevoNombreSala" render="nuevoNombreSala msnNombreSala" />
                                        </h:inputText>
                                        <h6><h:message id="msnNombreSala" for="nuevoNombreSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Tipo de Costo*"/></strong>
                                        <h:selectOneMenu disabled="#{controllerRegistrarSala.activarNuevoEdificio}" value="#{controllerRegistrarSala.costoAlquilerDigitado}"
                                                         class="form-control"
                                                         id="costoAlquilerDigitado">
                                            <f:selectItem itemLabel="DIGITADO MANUALMENTE" itemValue="false" />
                                            <f:selectItem itemLabel="CALCULADO POR VALORES MODULOS" itemValue="true" />
                                            <f:ajax event="change" listener="#{controllerRegistrarSala.cambiarCostoAlquilerDigitado()}" execute="@this" render="nuevoCostoSala msnCostoAlquilerDigitado"/>
                                        </h:selectOneMenu>
                                        <h6><h:message id="msnCostoAlquilerDigitado" for="costoAlquilerDigitado" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Costo Alquiler*"/></strong>
                                        <div class="input-group">
                                            <h:inputText maxlength="10"  value="#{controllerRegistrarSala.nuevoCostoSala}" disabled="#{controllerRegistrarSala.activarCasillas}" required="true" class="form-control" id="nuevoCostoSala" requiredMessage="El campo Costo es obligatorio.">
                                                <f:ajax event="blur" listener="#{controllerRegistrarSala.validarCostoAlquilerSala()}" execute="nuevoCostoSala" render="nuevoCostoSala msnCostoSala" />
                                            </h:inputText>
                                            <span class="input-group-addon">$</span>
                                        </div>
                                        <h6><h:message id="msnCostoSala" for="nuevoCostoSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Capacidad Maxima(Cantidad Modulos)*"/></strong>
                                        <h:inputText maxlength="2"  value="#{controllerRegistrarSala.nuevoCapacidadSala}" disabled="#{controllerRegistrarSala.activarCasillas}" required="true" class="form-control" id="nuevoCapacidadSala" requiredMessage="El campo Capacidada es obligatorio.">
                                            <f:ajax event="blur" listener="#{controllerRegistrarSala.validarCapacidadSala()}" execute="nuevoCapacidadSala" render="nuevoCapacidadSala msnCapacidadSala" />
                                        </h:inputText>
                                        <h6><h:message id="msnCapacidadSala" for="nuevoCapacidadSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Descripción*"/></strong>
                                        <h:inputText maxlength="500"  value="#{controllerRegistrarSala.nuevoDescripcionSala}" disabled="#{controllerRegistrarSala.activarCasillas}" required="true" class="form-control" id="nuevoDescripcionSala" requiredMessage="El campo Descripcion es obligatorio.">
                                            <f:ajax event="blur" listener="#{controllerRegistrarSala.validarDescripcionSala()}" execute="nuevoDescripcionSala" render="nuevoDescripcionSala msnDescripcionSala" />
                                        </h:inputText>
                                        <h6><h:message id="msnDescripcionSala" for="nuevoDescripcionSala" style="color: red"/></h6>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <legend class="text-info">Información Universidad</legend>
                                    <div class="form-group">
                                        <strong><h:outputText value="Departamento*"/></strong>
                                        <h:inputText value="#{controllerRegistrarSala.nuevoLaboratorioSala.departamento.nombredepartamento}" class="form-control" readonly="true"/>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Laboratorio*"/></strong>
                                        <h:inputText value="#{controllerRegistrarSala.nuevoLaboratorioSala.nombrelaboratorio}" class="form-control" readonly="true"/>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Sede*"/></strong>
                                        <h:selectOneMenu value="#{controllerRegistrarSala.nuevoSedeSala}"
                                                         class="form-control" disabled="#{controllerRegistrarSala.activarCasillas}"
                                                         id="nuevoSedeSala">
                                            <f:selectItem itemLabel="Seleccione Sede" itemValue="null" />
                                            <f:selectItems value="#{controllerRegistrarSala.listaSedes}" var="sede"
                                                           itemLabel="#{sede.nombresede}" itemValue="#{sede}"/>
                                            <f:converter converterId="ConverterGenerico" />
                                            <f:ajax event="change" listener="#{controllerRegistrarSala.actualizarNuevoSede()}" execute="nuevoSedeSala" render="@this nuevoEdificioSala msnedeSala"/>
                                        </h:selectOneMenu>
                                        <h6><h:message id="msnedeSala" for="nuevoSedeSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Edificio*"/></strong>
                                        <h:selectOneMenu disabled="#{controllerRegistrarSala.activarNuevoEdificio}" value="#{controllerRegistrarSala.nuevoEdificioSala}"
                                                         class="form-control"
                                                         id="nuevoEdificioSala">
                                            <f:selectItem itemLabel="Seleccione Edificio" itemValue="null" />
                                            <f:selectItems value="#{controllerRegistrarSala.listaEdificios}" var="edificio"
                                                           itemLabel="#{edificio.descripcionedificio}" itemValue="#{edificio}"/>
                                            <f:converter converterId="ConverterGenerico" />
                                            <f:ajax event="change" listener="#{controllerRegistrarSala.actualizarEdificios()}" execute="nuevoSedeSala" render="@this msnEdificioSala"/>
                                        </h:selectOneMenu>
                                        <h6><h:message id="msnEdificioSala" for="nuevoEdificioSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <strong><h:outputText value="Ubicación/Piso Sala*"/></strong>
                                        <h:inputText maxlength="45" disabled="#{controllerRegistrarSala.activarCasillas}" value="#{controllerRegistrarSala.nuevoUbicacionSala}" required="true" class="form-control" id="nuevoUbicacionSala" requiredMessage="El campo Ubicacion es obligatorio.">
                                            <f:ajax event="blur" listener="#{controllerRegistrarSala.validarUbicacionSala()}" execute="nuevoUbicacionSala" render="nuevoUbicacionSala msnUbicacionSala" />
                                        </h:inputText>
                                        <h6><h:message id="msnUbicacionSala" for="nuevoUbicacionSala" style="color: red"/></h6>
                                    </div>
                                    <div class="form-group">
                                        <label for="nuevoTipo">
                                            Tipo de Sala*
                                        </label>
                                        <h:selectOneMenu value="#{controllerRegistrarSala.nuevoTipo}"
                                                         class="form-control" disabled="#{controllerRegistrarSala.activarCasillas}"
                                                         id="nuevoTipo">
                                            <f:selectItem itemLabel="PUBLICA" itemValue="false" />
                                            <f:selectItem itemLabel="PRIVADA" itemValue="true" />
                                        </h:selectOneMenu>
                                    </div>
                                    <div class="form-group">
                                        <label for="nuevoBodega">
                                            ¿La sala a ingresar es una bodega de equipos? (Recuerde que esta seleccion no puede modificarse)*
                                        </label>
                                        <h:selectOneMenu value="#{controllerRegistrarSala.nuevoTipo}"
                                                         class="form-control" disabled="#{controllerRegistrarSala.activarCasillas}"
                                                         id="nuevoBodega">
                                            <f:selectItem itemLabel="NO ES BODEGA" itemValue="false" />
                                            <f:selectItem itemLabel="ES UNA BODEGA" itemValue="true" />
                                        </h:selectOneMenu>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <legend class="h5 text-info">Datos Opcionales</legend>
                                    <div class="form-group">
                                        <strong><h:outputText value="Costo Inversión"/></strong>
                                        <div class="input-group">
                                            <h:inputText maxlength="12"  value="#{controllerRegistrarSala.nuevoInversionSala}" disabled="#{controllerRegistrarSala.activarCasillas}" class="form-control" id="nuevoInversionSala" >
                                                <f:ajax event="blur" listener="#{controllerRegistrarSala.validarInversionSala()}" execute="nuevoInversionSala" render="nuevoInversionSala msnInversionSala" />
                                            </h:inputText>
                                            <span class="input-group-addon">$</span>
                                        </div>
                                        <h6><h:message id="msnInversionSala" for="nuevoInversionSala" style="color: red"/></h6>
                                    </div>
                                </fieldset>
                                <br></br>
                                <fieldset>
                                    <legend class="text-info">Tipos de servicios que prestará la Sala</legend>
                                    <div class="row">
                                        <h:dataTable id="dataTable" var="item" 
                                                     styleClass="table table-condensed table-responsive"  
                                                     value="#{controllerRegistrarSala.listaAsociacionServicios}">
                                            <h:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Servicio"/>
                                                </f:facet>
                                                <h:outputText value="#{item.servicio.nombreservicio}"/>
                                            </h:column>  
                                            <h:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Adicionar"/>
                                                </f:facet>
                                                <h:selectBooleanCheckbox disabled="#{controllerRegistrarSala.activarCasillas}" value="#{item.activo}"/>
                                            </h:column>
                                        </h:dataTable>
                                    </div>
                                </fieldset>
                                <br></br>
                                <hr class="intro-divider"/>
                                <div class="row col-md-12">
                                    <div class="text-center">
                                        <h5>
                                            Resultados del Formulario
                                        </h5>
                                        <strong>
                                            <h:outputText id="mensajeFormulario" class="text-uppercase" value="#{controllerRegistrarSala.mensajeFormulario}" style="color: #{controllerRegistrarSala.colorMensaje}}"/>
                                        </strong>
                                    </div>
                                    <br></br>
                                </div>
                                <hr class="intro-divider"/>
                                <div class="right pull-right">
                                    <h:commandButton class="btn btn-success" disabled="#{controllerRegistrarSala.activarAceptar}" value="Registrar" actionListener="#{controllerRegistrarSala.registrarNuevoSala()}">
                                        <f:ajax execute="@form" render="form" />
                                    </h:commandButton>
                                    <span></span>
                                    <span></span>
                                    <h:commandButton value="Cancelar" class="btn btn-danger" action="#{controllerRegistrarSala.limpiarRegistroSalaLaboratorio()}" immediate="true">
                                        <f:ajax execute="@form" render="form" />
                                    </h:commandButton>
                                    <span></span>
                                    <span></span>
                                    <h:commandButton value="Limpiar" class="btn btn-info" disabled="#{controllerRegistrarSala.activarLimpiar}" actionListener="#{controllerRegistrarSala.cambiarActivarCasillas()}" >
                                        <f:ajax execute="@form" render="form" />
                                    </h:commandButton>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </ui:define>  
        </ui:composition>
    </h:body>
</html>